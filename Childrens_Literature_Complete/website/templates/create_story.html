{% extends "base.html" %}
{% block content %}

<div class="create-story">

  <form action="/create_story" method="POST">
    <input type="hidden" name="user_id" value="{{ request.args.get('user_id') }}">

    <h2 class="section-title">Customise your story and characters</h2>
    
    <div class="options-grid">
      <div class="option-card">
        <h3>Target Age *</h3>
        <div class="bubble-grid">
          <label class="bubble">
            <input type="radio" name="age_range" value="0-3" required> ğŸ‘¶ 0â€“3
          </label>
          <label class="bubble">
            <input type="radio" name="age_range" value="4-6"> ğŸ§’ 4â€“6
          </label>
          <label class="bubble selected">
            <input type="radio" name="age_range" value="7-9" checked> ğŸ§‘ 7â€“9
          </label>
          <label class="bubble">
            <input type="radio" name="age_range" value="10-12"> ğŸ’ 10â€“12
          </label>
        </div>
      </div>

      <!-- CHARACTER NAME -->
      <div class="option-card">
        <h3>Character Name</h3>
        <div class="input-bubble">
          <input type="text" name="character_name" placeholder="e.g., Leo, Amara, Sofia">
        </div>
      </div>

      <!-- CHARACTER GENDER -->
      <div class="option-card">
        <h3>Character Gender</h3>
        <div class="bubble-grid">
          <label class="bubble"><input type="radio" name="character_gender" value="female"> ğŸ‘§ Female</label>
          <label class="bubble"><input type="radio" name="character_gender" value="male"> ğŸ‘¦ Male</label>
          <label class="bubble"><input type="radio" name="character_gender" value="non-binary"> ğŸŒˆ Non-Binary</label>
        </div>
      </div>
    </div>

    <!-- SECOND ROW -->
    <div class="options-grid">
    
      <!-- CHARACTER TYPE -->
      <div class="option-card">
        <h3>Character Type</h3>
        <div class="bubble-grid">
          <label class="bubble">
            <input type="radio" name="character_type" value="human"> ğŸ§ Human
          </label>
          <label class="bubble">
            <input type="radio" name="character_type" value="animal"> ğŸ» Animal
          </label>
          <label class="bubble">
            <input type="radio" name="character_type" value="magical"> ğŸ¦„ Magical
          </label>
        </div>
      </div>

      <!-- CHARACTER TRAITS -->
      <div class="option-card">
        <h3>Character Traits</h3>
        <div class="bubble-grid">
          <label class="bubble"><input type="checkbox" name="character_traits" value="brave"> ğŸ¦ Brave</label>
          <label class="bubble"><input type="checkbox" name="character_traits" value="curious"> ğŸ” Curious</label>
          <label class="bubble"><input type="checkbox" name="character_traits" value="kind"> ğŸ’› Kind</label>
          <label class="bubble"><input type="checkbox" name="character_traits" value="funny"> ğŸ˜‚ Funny</label>
          <label class="bubble"><input type="checkbox" name="character_traits" value="smart"> ğŸ§  Smart</label>
          <label class="bubble"><input type="checkbox" name="character_traits" value="happy"> ğŸ˜Š Happy</label>
        </div>
      </div>

      <!-- STORY SETTING -->
      <div class="option-card">
        <h3>Story Setting</h3>
        <div class="input-bubble">
          <input type="text" name="location" placeholder="e.g., magical forest, seaside town">
        </div>
      </div>

    </div>

    <!-- THIRD ROW -->
    <div class="options-grid">

      <!-- THEME -->
      <div class="option-card">
        <h3>Theme</h3>
        <div class="bubble-grid">
          <label class="bubble"><input type="radio" name="theme" value="adventure"> ğŸ—º Adventure</label>
          <label class="bubble"><input type="radio" name="theme" value="friendship"> ğŸ¤ Friendship</label>
          <label class="bubble"><input type="radio" name="theme" value="funny"> ğŸ˜‚ Funny</label>
          <label class="bubble"><input type="radio" name="theme" value="courage"> ğŸ¦ Courage</label>
          <label class="bubble"><input type="radio" name="theme" value="kindness"> ğŸ’• Kindness</label>
          <label class="bubble"><input type="radio" name="theme" value="discovery"> ğŸ” Discovery</label>
        </div>
      </div>

      <!-- CULTURAL BACKGROUND -->
      <div class="option-card">
        <h3>Cultural Background</h3>
        <div class="input-bubble">
          <input type="text" name="character_cultural_background" placeholder="e.g., Nigerian-American">
        </div>
      </div>

      <!-- SPECIFIC TRADITIONS -->
      <div class="option-card">
        <h3>Specific Traditions or Cultural Elements</h3>
        <div class="input-bubble">
          <textarea name="specific_traditions" placeholder="e.g., festivals, foods, music"></textarea>
        </div>
      </div>

    </div>

    <button type="submit">Create My Story âœ¨</button>
  </form>

</div>

<script>

document.querySelectorAll('.bubble input').forEach(input => {
  input.addEventListener('change', () => {
    const grid = input.closest('.bubble-grid');
    if (input.type === 'radio') {
      grid.querySelectorAll('.bubble').forEach(b => b.classList.remove('selected'));
    }
    input.closest('.bubble').classList.toggle('selected', input.checked);
  });
});
</script>

{% endblock %}
